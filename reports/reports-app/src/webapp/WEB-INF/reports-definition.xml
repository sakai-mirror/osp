<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<!-- 
	Notes:
	
	Each report MUST have a different idString.  This is how saved reports are
	linked back to the report definition
-->
<beans>


    <bean id="report1"
        class="org.theospi.api.app.reports.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778881</value>
        </property>
        <property name="title">
            <value>
                Report Variable Type Test
            </value>
        </property>
        <property name="query">
            <value>
                select * from sakai_site where createdby IN (?, ?, ?, ?, ?)
            </value>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                Tests each of the parameter variable types
            </value>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A Fillin Variable</value></property>
                    <property name="paramName"><value>[fillin]</value></property>
                    <property name="description"><value>a param for the user to fill in</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>fillin</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>a param for the user to fill in</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A Fillin Date</value></property>
                    <property name="paramName"><value>[fillin]</value></property>
                    <property name="description"><value>a param for the user to fill in</value></property>
                    <property name="type"><value>date</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>fillin</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>a param for the user to fill in</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A Set Variable</value></property>
                    <property name="paramName"><value>[set]</value></property>
                    <property name="description"><value>a param for the user to select from a drop down</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>set</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>[(dogs; Goldie), cat, (car), apple, turkey, paper, ]</value></property>
                </bean>
                <!-- 
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A multi Set Variable</value></property>
                    <property name="paramName"><value>[multiset]</value></property>
                    <property name="description"><value>a param for the user to select from a list box</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>multiset</value></property>
                    <property name="value"><value>[(dogs; Goldie), cat, (car), apple, turkey, paper, {userid}]</value></property>
                </bean> -->
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A sql Variable</value></property>
                    <property name="paramName"><value>[sql]</value></property>
                    <property name="description"><value>a param for the user to select from a drop down by sql</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>sql</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>select site_id from sakai_site_user where user_id="{userid}"</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
                <!-- 
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A multi sql Variable</value></property>
                    <property name="paramName"><value>[multisql]</value></property>
                    <property name="description"><value>a param for the user to select from a list box by sql</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>multisql</value></property>
                    <property name="value"><value>select site_id from sakai_site</value></property>
                </bean>
                -->
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>A static Variable</value></property>
                    <property name="paramName"><value>[static]</value></property>
                    <property name="description"><value>a param set by the definition</value></property>
                    <property name="type"><value>string</value></property>
                                    <!-- int/float/date/string -->
                    <property name="valueType"><value>static</value></property>
                                    <!-- fillin/set/multiset/sql/multisql/static -->
                    <property name="value"><value>{userid}</value></property>
                            <!-- (validation rules)/[(elem1; title1), (elem2), elem3,
                                    etc]/ select username, firstName from worksite/value -->
                </bean>
            </list>
        </property>
        <!-- 
        <property name="forms">
            <list>
                <map>
                    <entry key="formName">
                        <value>Address</value>
                    </entry>
                    <entry key="formFields">
                        <list>
                            <value>state</value>
                            <value>city</value>
                        </list>
                    </entry>
                </map>
            </list>
        </property>
        -->
        <property name="xsls">
            <list>
                <bean id="reportXsl1.1" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report1.1.xsl</value></property>
                    <property name="title"><value>Report Result View X</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl1.2" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report1.2.xsl</value></property>
                    <property name="title"><value>Report Result View Y</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl1.3" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report1.3.xsl</value></property>
                    <property name="title"><value>CSV</value></property>
                    <property name="isExport"><value>true</value></property>
                    <property name="contentType"><value>application/x-csv</value></property>
                </bean>
                <bean id="reportXsl1.4" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report1.1.xsl</value></property>
                    <property name="title"><value>HTML</value></property>
                    <property name="isExport"><value>true</value></property>
                    <property name="contentType"><value>text/html</value></property>
                </bean>
            </list>
        </property>
        
        <property name="defaultXsl">
                <bean class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report1.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

    </bean>
    
    
    
    <bean id="report2"
        class="org.theospi.api.app.reports.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778882</value>
        </property>
        <property name="title">
            <value>
                User Story 16 Test
            </value>
        </property>
        <property name="query">
            <value>
                select * from sakai_site where createdby=?
            </value><!-- 
            select body, length(body) `bodysize` from content_resource_body_binary
                -->
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                This report is to view the portfolio performance
            </value>
        </property>
        <property name="defaultXsl">
                <bean class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report2.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>Your user id</value></property>
                    <property name="paramName"><value>[user]</value></property>
                    <property name="description"><value>a param set by the definition</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>static</value></property>
                    <property name="value"><value>{userid}</value></property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean id="reportXsl2.1" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report2.1.xsl</value></property>
                    <property name="title"><value>Report Result View X</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl2.2" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report2.2.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    <bean id="report3"
        class="org.theospi.api.app.reports.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778883</value>
        </property>
        <property name="title">
            <value>
                Artifact import test
            </value>
        </property>
        <property name="query">
            <value>
                select id `RESOURCE_ID_artifact` from dw_resource
            </value>
        </property>
        <property name="resultProcessors">
           <list>
              <ref bean="org.theospi.api.app.reports.ResultProcessor.defaultArtifactLoader" />
           </list>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                A test to open an artifact and move it into the xml result.
                the column name must end in artifact in order for the code to open the column 
                as an artifact
            </value>
        </property>
        <property name="defaultXsl">
                <bean class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report3.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
            </list>
        </property>
        <property name="xsls">
            <list>
                <bean id="reportXsl3.1" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report3.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
                <bean id="reportXsl3.2" class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report3.2.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
            </list>
        </property>

    </bean>
    
    
    
    
    <bean id="report4"
        class="org.theospi.api.app.reports.ReportDefinition">

        <property name="idString">
            <value>11112222-3333-4444-5555-666677778884</value>
        </property>
        <property name="title">
            <value>
                Variable Substitution Report
            </value>
        </property>
        <property name="query">
            <value>
                select id, uri, resource_type, sub_type, primary_mime_type,
                sub_mime_type, copyright, description from dw_resource
                where 1 or 1 != ?
            </value>
        </property>
        <property name="keywords">
            <value>CIG user portfolio etc</value>
        </property>
        <property name="description">
            <value>
                A test to open an artifact and move it into the xml result.
                the column name must end in artifact in order for the code to open the column 
                as an artifact
            </value>
        </property>
        <property name="defaultXsl">
                <bean class="org.theospi.api.app.reports.ReportXsl">
                    <property name="xslLink"><value>/reportxsls/report3.1.xsl</value></property>
                    <property name="isExport"><value>false</value></property>
                </bean>
        </property>

        <property name="reportDefinitionParams">
            <list>
                <bean class="org.theospi.api.app.reports.ReportDefinitionParam">
                    <property name="title"><value>System Values</value></property>
                    <property name="paramName"><value>[set]</value></property>
                    <property name="description"><value>to test all the variables are substituted</value></property>
                    <property name="type"><value>string</value></property>
                    <property name="valueType"><value>set</value></property>
                    <property name="value">
                    	<value>[(uname; user: {userid}), 
                    			(name; display name: {userdisplayname}), 
                    			(email; user email: {useremail}),
                    			(fname; first name: {userfirstname}), 
                    			(lname; last name: {userlastname}), 
                    			(worksiteid; worksiteid: {worksiteid}),
                    			(toolid; toolid: {toolid})]</value>
                    </property>
                </bean>
            </list>
        </property>
        <property name="xsls">
            <list>
               <bean class="org.theospi.api.app.reports.ReportXsl">
                   <property name="xslLink"><value>/reportxsls/report3.1.xsl</value></property>
                   <property name="isExport"><value>false</value></property>
               </bean>
               <bean class="org.theospi.api.app.reports.ReportXsl">
                   <property name="xslLink"><value>/reportxsls/defaultExport.xsl</value></property>
                   <property name="isExport"><value>true</value></property>
                  <property name="extension"><value>csv</value></property>
                  <property name="target"><value>_self</value></property>
                  <property name="resultsPostProcessor">
                     <ref bean="org.theospi.api.app.reports.ResultsPostProcessor.csv"/>
                  </property>
               </bean>
               <bean class="org.theospi.api.app.reports.ReportXsl">
                   <property name="xslLink"><value>/reportxsls/report1.2.xsl</value></property>
                   <property name="isExport"><value>true</value></property>
               </bean>
            </list>
        </property>

    </bean>
    

</beans>
